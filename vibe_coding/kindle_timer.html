<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Timer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex flex-col items-center justify-center min-h-screen bg-gray-100 text-gray-800">
  <div class="bg-white shadow-xl rounded-3xl p-10 text-center space-y-8 w-[400px]">
    <h1 class="text-4xl font-bold">‚è≤ Smart Timer</h1>

    <!-- Knobs -->
    <div class="flex justify-center gap-6 text-2xl">
      <div>
        <label class="block text-base text-gray-500 mb-1">Days</label>
        <input id="days" type="number" min="0" max="99" value="0"
               class="w-24 text-center border-2 rounded-xl p-2 text-2xl font-mono">
      </div>
      <div>
        <label class="block text-base text-gray-500 mb-1">Hours</label>
        <input id="hours" type="number" min="0" max="23" value="0"
               class="w-24 text-center border-2 rounded-xl p-2 text-2xl font-mono">
      </div>
      <div>
        <label class="block text-base text-gray-500 mb-1">Minutes</label>
        <input id="minutes" type="number" min="0" max="59" value="0"
               class="w-24 text-center border-2 rounded-xl p-2 text-2xl font-mono">
      </div>
    </div>

    <!-- Display -->
    <div id="display" class="text-5xl font-mono font-bold text-blue-600 tracking-wider">
      00:00:00:00
    </div>

    <!-- Buttons -->
    <div class="flex justify-center gap-6">
      <button id="startBtn" class="px-6 py-3 bg-green-500 text-white text-xl rounded-xl hover:bg-green-600">Start</button>
      <button id="pauseBtn" class="px-6 py-3 bg-yellow-500 text-white text-xl rounded-xl hover:bg-yellow-600">Pause</button>
      <button id="resetBtn" class="px-6 py-3 bg-red-500 text-white text-xl rounded-xl hover:bg-red-600">Reset</button>
    </div>
  </div>

  <script>
    let totalSeconds = 0;
    let timer = null;
    const display = document.getElementById('display');

    function formatTime(sec) {
      const d = Math.floor(sec / 86400);
      const h = Math.floor((sec % 86400) / 3600);
      const m = Math.floor((sec % 3600) / 60);
      const s = sec % 60;
      return `${String(d).padStart(2,'0')}:${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    }

    function updateDisplay() {
      display.textContent = formatTime(totalSeconds);
    }

    function startTimer() {
      if (timer) return;

      const d = parseInt(document.getElementById('days').value) || 0;
      const h = parseInt(document.getElementById('hours').value) || 0;
      const m = parseInt(document.getElementById('minutes').value) || 0;

      if (totalSeconds === 0) totalSeconds = d * 86400 + h * 3600 + m * 60;
      updateDisplay();

      function tick() {
        if (totalSeconds <= 0) {
          clearInterval(timer);
          timer = null;
          return;
        }

        // Countdown behavior: 
        // - If more than 60s left, update every minute.
        // - Under 60s, update every second.
        const step = totalSeconds > 60 ? 1 : 1;
        totalSeconds -= step;
        updateDisplay();

        clearInterval(timer);
        timer = setTimeout(tick, step * 1000);
      }

      timer = setTimeout(tick, 1000);
    }

    function pauseTimer() {
      clearInterval(timer);
      clearTimeout(timer);
      timer = null;
    }

    function resetTimer() {
      clearInterval(timer);
      clearTimeout(timer);
      timer = null;
      totalSeconds = 0;
      display.textContent = '00:00:00:00';
      ['days','hours','minutes'].forEach(id => document.getElementById(id).value = 0);
    }

    document.getElementById('startBtn').addEventListener('click', startTimer);
    document.getElementById('pauseBtn').addEventListener('click', pauseTimer);
    document.getElementById('resetBtn').addEventListener('click', resetTimer);
  </script>
</body>
</html>
