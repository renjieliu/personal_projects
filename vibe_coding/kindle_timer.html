<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Timer with Presets</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex flex-col items-center justify-center min-h-screen bg-gray-100 text-gray-800">
  <div class="bg-white shadow-xl rounded-3xl p-10 text-center space-y-8 w-[420px]">
    <h1 class="text-4xl font-bold">‚è≤ Timer</h1>

    <!-- Presets -->
    <div class="grid grid-cols-3 gap-3 text-sm">
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="5">5 min</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="10">10 min</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="25">25 min</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="45">45 min</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="60">1 hr</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="120">2 hr</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="180">3 hr</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-min="300">5 hr</button>
      <button class="preset bg-blue-100 hover:bg-blue-200 rounded-lg py-2" data-day="1">1 day</button>
    </div>

    <!-- Knobs -->
    <div class="flex justify-center gap-6 text-2xl">
      <div>
        <label class="block text-base text-gray-500 mb-1">Days</label>
        <input id="days" type="number" min="0" max="99" value="0"
               class="w-24 text-center border-2 rounded-xl p-2 text-2xl font-mono">
      </div>
      <div>
        <label class="block text-base text-gray-500 mb-1">Hours</label>
        <input id="hours" type="number" min="0" max="23" value="0"
               class="w-24 text-center border-2 rounded-xl p-2 text-2xl font-mono">
      </div>
      <div>
        <label class="block text-base text-gray-500 mb-1">Minutes</label>
        <input id="minutes" type="number" min="0" max="59" value="0"
               class="w-24 text-center border-2 rounded-xl p-2 text-2xl font-mono">
      </div>
    </div>

    <!-- Display -->
    <div id="display" class="text-5xl font-mono font-bold text-blue-600 tracking-wider">
      00:00:00:00
    </div>

    <!-- Buttons -->
    <div class="flex justify-center gap-6">
      <button id="startBtn" class="px-6 py-3 bg-green-500 text-white text-xl rounded-xl hover:bg-green-600">Start</button>
      <button id="pauseBtn" class="px-6 py-3 bg-yellow-500 text-white text-xl rounded-xl hover:bg-yellow-600">Pause</button>
      <button id="resetBtn" class="px-6 py-3 bg-red-500 text-white text-xl rounded-xl hover:bg-red-600">Reset</button>
    </div>
  </div>

  <script>
    let totalSeconds = 0;
    let timer = null;
    const display = document.getElementById('display');

    function formatTime(sec) {
      const d = Math.floor(sec / 86400);
      const h = Math.floor((sec % 86400) / 3600);
      const m = Math.floor((sec % 3600) / 60);
      const s = sec % 60;
      return `${String(d).padStart(2,'0')}:${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    }

    function updateDisplay() {
      display.textContent = formatTime(totalSeconds);
    }

    function startTimer() {
      if (timer) return;

      const d = parseInt(document.getElementById('days').value) || 0;
      const h = parseInt(document.getElementById('hours').value) || 0;
      const m = parseInt(document.getElementById('minutes').value) || 0;

      if (totalSeconds === 0)
        totalSeconds = d * 86400 + h * 3600 + m * 60;

      updateDisplay();

      function tick() {
        if (totalSeconds <= 0) {
          clearTimeout(timer);
          timer = null;
          display.classList.remove("text-red-600");
          return;
        }

        // Switch to red color for last minute
        if (totalSeconds <= 60) display.classList.add("text-red-600");

        // const step = totalSeconds > 60 ? 60 : 1;
        const step = 1
        totalSeconds -= step;
        updateDisplay();

        clearTimeout(timer);
        timer = setTimeout(tick, step * 1000);
      }

      timer = setTimeout(tick, 1000);
    }

    function pauseTimer() {
      clearTimeout(timer);
      timer = null;
    }

    function resetTimer() {
      clearTimeout(timer);
      timer = null;
      totalSeconds = 0;
      display.textContent = '00:00:00:00';
      display.classList.remove("text-red-600");
      ['days','hours','minutes'].forEach(id => document.getElementById(id).value = 0);
    }

    // Preset click handler
    document.querySelectorAll('.preset').forEach(btn => {
      btn.addEventListener('click', () => {
        const min = parseInt(btn.dataset.min) || 0;
        const day = parseInt(btn.dataset.day) || 0;
        const h = Math.floor(min / 60);
        const m = min % 60;
        document.getElementById('days').value = day;
        document.getElementById('hours').value = h;
        document.getElementById('minutes').value = m;
      });
    });

    document.getElementById('startBtn').addEventListener('click', startTimer);
    document.getElementById('pauseBtn').addEventListener('click', pauseTimer);
    document.getElementById('resetBtn').addEventListener('click', resetTimer);
  </script>
</body>
</html>
